{"version":3,"sources":["scripts/buildfire/components/carousel/carousel.js","scripts/buildfire/components/pluginInstance/sortableList.js"],"names":["buildfire","components","carousel","_resizeImage","url","options","imageLib","resizeImage","_cropImage","cropImage","_getDomSelector","selector","nodeType","document","querySelector","editor","items","this","init","loadItems","prototype","_renderTemplate","itemsContainer","_initEvents","onItemChange","item","index","onOrderChange","oldIndex","newIndex","console","warn","onAddItems","onDeleteItem","appendItems","Array","length","_removeAll","i","push","_appendItem","append","clear","fc","firstChild","removeChild","me","wrapper","createElement","moveHandle","mediaHolder","image","details","title","actionsWrapper","editButton","deleteButton","className","src","iconUrl","width","height","innerHTML","action","appendChild","addEventListener","e","preventDefault","itemIndex","_getItemIndex","currentTarget","target","parentElement","parentNode","_openActionItem","actionItem","parent","splice","componentContainer","componentName","contentContainer","buttonContainer","button","sliderContainer","_openImageLib","imageUrls","newItems","currentItem","actionItems","create","sortableList","Sortable","animation","onUpdate","evt","_getSortableItemIndex","tmp","onStart","callback","showDialog","showIcon","allowNoAction","err","error","multiSelect","showIcons","result","selectedFiles","indexOf","previousSibling","view","layout","speed","$","fn","owlCarousel","_initDimensions","_loadItems","window","dispatchEvent","CustomEvent","_renderSlider","that","_loadImages","_applySlider","_hideSlider","$slider","_destroySlider","_showSlider","innerWidth","Math","ceil","innerHeight","cssWidth","cssHeight","_minHeight","slider","get","style","display","sliderOptions","navigation","dots","slideSpeed","paginationSpeed","singleItem","pagination","itemsMobile","lazyLoad","autoHeight","autoplay","autoplaySpeed","autoplayTimeout","loop","show","data","sliderData","trigger","destroy","position","top","left","itemsLength","pending","execute","local","log","transform","pluginInstance","getAllPlugins","pageIndex","pageSize","search","_mapFromSearch","total","totalRecord","dataResult","dataResultLength","currentPlugin","tempObj","_buildfire","folderName","pluginType","instanceId","pluginTypeId","pluginTypeName","name","iconClassName","dialogOptions","loadAllItems","hideLoadButton","loadedInstances","checkId","floor","random","loadAllSelector","_loadAllItems","confirmDeleteItem","onLoadAll","onUnloadAll","setAttribute","_toggleAddButton","showPlugin","media","buttonsWrapper","navigateButton","navigateTo","pluginId","deleteItem","itemId","notifications","confirm","message","buttonLabels","bind","_getOffset","el","getBoundingClientRect","scrollX","scrollY","getAllContainer","getAllCheckbox","getAlllabel","removeAttribute","id","_openPluginInstance","plugins","pluginsLength","newInstances","addedItems","checked","plugin","status","buttonSelector"],"mappings":"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","file":"main-561f9506bb.js","sourcesContent":["'use strict';\n\nif (typeof (buildfire) == \"undefined\") throw (\"please add buildfire.js first to use carousel components\");\n\nif (typeof ($) == \"undefined\") throw (\"please add JQuery first to use carousel components\");\n\nif (typeof (buildfire.components) == \"undefined\")\n    buildfire.components = {};\n\nif (typeof (buildfire.components.carousel) == \"undefined\")\n    buildfire.components.carousel = {};\n\nbuildfire.components.carousel._resizeImage = function (url, options) {\n    if (!url) {\n        return \"\";\n    }\n    else {\n        return buildfire.imageLib.resizeImage(url, options);\n    }\n};\n\nbuildfire.components.carousel._cropImage = function (url, options) {\n    if (!url) {\n        return \"\";\n    }\n    else {\n        return buildfire.imageLib.cropImage(url, options);\n    }\n};\n\nbuildfire.components.carousel._getDomSelector = function (selector) {\n    if (selector && selector.nodeType && selector.nodeType === 1) {\n        return selector;\n    } else if (typeof (selector) === \"string\") {\n        selector = document.querySelector(selector);\n        if (selector) {\n            return selector;\n        }\n        throw \"selector is not a valid DOM selector\";\n    }\n    throw \"selector is not a valid DOM element nor string selector\";\n}\n\n// This is the class that will be used in the plugin content, design, or settings sections\nbuildfire.components.carousel.editor = function (selector, items) {\n    // carousel editor requires Sortable.js\n    if (typeof (Sortable) == \"undefined\") throw (\"please add Sortable first to use carousel components\");\n    this.selector = selector;\n    this.items = [];\n    this.init(selector);\n    this.loadItems(items);\n};\n\n// Carousel editor methods\nbuildfire.components.carousel.editor.prototype = {\n    // will be called to initialize the setting in the constructor\n    init: function (selector) {\n        this.selector = buildfire.components.carousel._getDomSelector(selector);\n        this._renderTemplate();\n        this.itemsContainer = this.selector.querySelector(\".carousel-items\");\n        this._initEvents();\n    },\n    // This will be triggered when you edit existing item details\n    onItemChange: function (item, index) {\n        throw (\"please handle onItemChange\");\n    },\n    /* This will be triggered when the order of items changes\n       Example: if you move the first item location to be the second this will return item object, 0, 1 */\n    onOrderChange: function (item, oldIndex, newIndex) {\n        console.warn(\"please handle onOrderChange\", item, oldIndex, newIndex);\n    },\n    // This will be triggered when you add a new item, item index will be items.length\n    onAddItems: function (items) {\n        console.warn(\"please handle onAddItems\", item);\n    },\n    // This will be triggered when you delete an item\n    onDeleteItem: function (item, index) {\n        console.warn(\"please handle onDeleteItem\", item);\n    },\n    // this method allows you to replace the slider image or append to then if appendItems = true\n    loadItems: function (items, appendItems) {\n        if (items && items instanceof Array) {\n            if (!appendItems && this.items.length !== 0) {\n                // here we want to remove any existing items since the user of the component don't want to append items\n                this._removeAll();\n            }\n\n            for (var i = 0; i < items.length; i++) {\n                this.items.push(items[i]);\n                this._appendItem(items[i]);\n            }\n        }\n    },\n    // allows you to append a single item or an array of items\n    append: function(items){\n        if(!items)\n            return;\n        else if(!(items instanceof Array) && typeof(items) == \"object\")\n            items=[items];\n\n        this.loadItems(items,true);\n    },\n    // remove all items in list\n    clear: function(){\n        this._removeAll();\n        this.onDeleteItem();\n    },\n    // remove all the DOM element and empty the items array\n    _removeAll: function () {\n        this.items = [];\n        var fc = this.itemsContainer.firstChild;\n        while (fc) {\n            this.itemsContainer.removeChild(fc);\n            fc = this.itemsContainer.firstChild;\n        }\n    },\n    // append new sortable item to the DOM\n    _appendItem: function (item) {\n        var me = this,\n            // Create the required DOM elements\n            wrapper = document.createElement(\"div\"),\n            moveHandle = document.createElement(\"span\"),\n            mediaHolder = document.createElement(\"div\"),\n            image = document.createElement(\"img\"),\n            details = document.createElement(\"div\"),\n            title = document.createElement(\"span\"),\n            actionsWrapper = document.createElement(\"div\"),\n            editButton = document.createElement(\"a\"),\n            deleteButton = document.createElement(\"span\");\n\n        // Add the required classes to the elements\n        wrapper.className = \"d-item\";\n        moveHandle.className = \"icon icon-menu pull-left\";\n        mediaHolder.className = \"media-holder pull-left\";\n        details.className = \"copy pull-right\";\n        title.className = \"title ellipsis\";\n        actionsWrapper.className = \"pull-right\";\n        editButton.className = \"text-primary text\";\n        deleteButton.className = \"btn-icon btn-delete-icon btn-danger transition-third\";\n\n        image.src = buildfire.components.carousel._resizeImage(item.iconUrl, { width: 80, height: 40 });\n        title.innerHTML = item.title;\n        editButton.innerHTML = (item.action && item.action != \"noAction\") ? \"Edit Action/Link\" : \"Add Action/Link\";\n\n        // Append elements to the DOM\n        wrapper.appendChild(moveHandle);\n        wrapper.appendChild(mediaHolder);\n        mediaHolder.appendChild(image);\n        details.appendChild(title);\n        \n        actionsWrapper.appendChild(editButton);\n        actionsWrapper.appendChild(deleteButton);\n\n        details.appendChild(actionsWrapper);\n\n        wrapper.appendChild(details);\n        me.itemsContainer.appendChild(wrapper);\n\n        // initialize the required events on the current item\n        (function () {\n            editButton.addEventListener(\"click\", function (e) {\n                e.preventDefault();\n                var itemIndex = me._getItemIndex(item);\n                var currentTarget = e.target;\n                var parentElement = currentTarget.parentNode.parentNode.parentNode;\n                me._openActionItem(item, function (actionItem) {\n                    me.items[itemIndex] = actionItem;\n                    item = actionItem;\n                    me.onItemChange(actionItem, itemIndex);\n                    parentElement.querySelector(\"img\").src = buildfire.components.carousel._resizeImage(actionItem.iconUrl, { width: 80, height: 40 });\n                    parentElement.querySelector(\".title\").innerHTML = actionItem.title;\n                    currentTarget.innerHTML = actionItem.action && actionItem.action != \"noAction\" ? \"Edit Action\" : \"Add Action\";\n                });\n            });\n\n            deleteButton.addEventListener(\"click\", function (e) {\n                e.preventDefault();\n                var itemIndex = me._getItemIndex(item),\n                    parent = this.parentNode.parentNode.parentNode;\n                if (itemIndex != -1) {\n                    me.items.splice(itemIndex, 1);\n                    parent.parentNode.removeChild(parent);\n                    me.onDeleteItem(item, itemIndex);\n                }\n            });\n        })(item);\n    },\n    // render the basic template HTML\n    _renderTemplate: function () {\n        var componentContainer = document.createElement(\"div\");\n        var componentName = document.createElement(\"span\");\n        var contentContainer = document.createElement(\"div\");\n        var buttonContainer = document.createElement(\"div\");\n        var button = document.createElement(\"a\");\n        var sliderContainer = document.createElement(\"div\");\n\n        componentContainer.className = \"item clearfix row\";\n        componentName.className = \"labels col-md-3 padding-right-zero pull-left\";\n        componentName.innerHTML = \"Image Carousel\";\n        contentContainer.className = \"main col-md-9 pull-right\";\n        buttonContainer.className = \"clearfix\";\n        button.className = \"btn btn-success pull-left add-new-carousel\";\n        sliderContainer.className = \"carousel-items hide-empty draggable-list-view margin-top-twenty border-radius-four border-grey\";\n\n        button.innerHTML = \"Add Image\";\n\n        componentContainer.appendChild(componentName);\n        buttonContainer.appendChild(button);\n        contentContainer.appendChild(buttonContainer);\n        contentContainer.appendChild(sliderContainer);\n        componentContainer.appendChild(contentContainer);\n\n        this.selector.appendChild(componentContainer);\n    },\n    // initialize the generic events\n    _initEvents: function () {\n        var me = this;\n        var oldIndex = 0;\n        // initialize add new item button\n        me.selector.querySelector(\".add-new-carousel\").addEventListener(\"click\", function () {\n            me._openImageLib( function (imageUrls) {\n                var newItems = [], currentItem = null;\n                for (var i = 0; i < imageUrls.length ; i++) {\n                    currentItem = buildfire.actionItems.create(null, imageUrls[i], 'image');\n                    if (!currentItem.action) {\n                        currentItem.action = \"noAction\";\n                    }\n\n                    newItems.push(currentItem);\n                    currentItem = null;\n                }\n\n                if(newItems.length) {\n                    me.loadItems(newItems, true);\n                    me.onAddItems(newItems);\n                }\n            });\n        });\n\n        // initialize the sort on the container of the items\n        me.sortableList = Sortable.create(me.itemsContainer, {\n            animation: 150,\n            onUpdate: function (evt) {\n                var newIndex = me._getSortableItemIndex(evt.item);\n                var tmp = me.items[oldIndex];\n\n                if (oldIndex < newIndex) {\n                    for (var i = oldIndex + 1; i <= newIndex; i++) {\n                        me.items[i - 1] = me.items[i];\n                    }\n                } else {\n                    for (var i = oldIndex - 1; i >= newIndex; i--) {\n                        me.items[i + 1] = me.items[i];\n                    }\n                }\n\n                me.items[newIndex] = tmp;\n                me.onOrderChange(tmp, oldIndex, newIndex);\n            },\n            onStart: function (evt) {\n                oldIndex = me._getSortableItemIndex(evt.item);\n            }\n        });\n    },\n    // a wrapper method over buildfire showDialog\n    _openActionItem: function (item, callback) {\n        buildfire.actionItems.showDialog(item, { showIcon: true, allowNoAction: true }, function (err, actionItem) {\n            if (err)\n                console.error(\"Error getting item details: \", err);\n            else {\n                if (actionItem) {\n                    callback(actionItem);\n                }\n            }\n        });\n    },\n    // a wrapper method over buildfire imageLib showDialog\n    _openImageLib: function (callback) {\n        buildfire.imageLib.showDialog({ multiSelect : true ,showIcons :false }, function (err, result) {\n            if (err)\n                console.error(\"Error getting images: \", err);\n            else\n                callback(result.selectedFiles);\n        });\n    },\n    // get item index in the items array\n    _getItemIndex: function (item) {\n        return this.items.indexOf(item);\n    },\n    // get item index from the DOM sortable elements\n    _getSortableItemIndex: function (item) {\n        var index = 0;\n        while ((item = item.previousSibling) != null) {\n            index++;\n        }\n        return index;\n    }\n};\n\n// This is the class that will be used in the mobile\nbuildfire.components.carousel.view = function (selector, items, layout,speed) {\n\tif (typeof($.fn) != \"object\" || !($.fn && $.fn.owlCarousel)) {\n        throw (\"please add owlCarousel.js first to use carousel component\");\n    }\n    this.selector = selector;\n    this.items = [];\n    this._initDimensions(layout);\n    this._loadItems(items, false);\n    this.init(selector,speed);\n\twindow.dispatchEvent(new CustomEvent('resize'));\n};\n\n// Carousel view methods\nbuildfire.components.carousel.view.prototype = {\n    // will be called to initialize the setting in the constructor\n    init: function (selector,speed) {\n        this.selector = buildfire.components.carousel._getDomSelector(selector);\n        this._renderSlider();\n\n        var that = this;\n\n        this._loadImages(speed, function(){\n            if (that.items.length) {\n                if(typeof speed === 'undefined')\n                    that._applySlider();\n                else\n                    that._applySlider(speed);\n            } else {\n                that._hideSlider();\n            }\n        });\n    },\n    // this method allows you to append or replace slider images\n    loadItems: function (items, appendItems, layout,speed) {\n        if (this.$slider) {\n            this._destroySlider();\n            this._removeAll();\n        }\n\n        this._initDimensions(layout);\n        this._renderSlider();\n\n        this._loadItems(items, appendItems);\n\n        var that = this;\n\n        this._loadImages(speed, function(){\n            if (!that.items.length) {\n                that._hideSlider();\n            } else {\n                that._showSlider();\n            }\n\n            // if items.length == 0 and appendItems == undefined no need to init the slider it will break if we do so\n            if (items instanceof Array && !items.length && !appendItems) {\n                return;\n            }\n            that._applySlider(speed);\n        });\n    },\n    // allows you to append a single item or an array of items\n    append: function(items){\n        if(!items)\n            return;\n        else if (!(items instanceof Array) && typeof(items) == \"object\")\n            items=[items];\n\n        this.loadItems(items,true);\n    },\n\n    _initDimensions: function (layout) {\n        this.width = window.innerWidth;\n        layout = layout || \"WideScreen\";\n        if (layout == \"WideScreen\") {\n          this.height = Math.ceil(9 * this.width / 16);\n        } else if (layout == \"Square\") {\n            this.height = this.width;\n        } else if (layout == \"Cinema\") {\n            this.height = Math.ceil(1 * this.width / 2.39);\n        }else if(layout == \"MobileScreen\"){\n            this.height=(window.innerHeight/this.width)*this.width;\n            this.width=this.width;\n        }\n\n        this.cssWidth = this.width + \"px\";\n\t\tif(this.height > 380){\n\t\t\tthis.cssHeight = '380px';\n\t\t}else{\n\t\t\tthis.cssHeight = this.height + \"px\";\t\t\t\n\t\t}\n\n\t\t// Set Min height on carousel so doesn't push content down on load.\n\t\tthis._minHeight = '180px';\n\t\tthis._minHeight = this.cssHeight;\n    },\n    // remove all nodes from the slider\n    _removeAll: function () {\n        if(!this.$slider)return;\n        var slider = this.$slider.get(0);\n        var fc = slider.firstChild;\n        while (fc) {\n            slider.removeChild(fc);\n            fc = slider.firstChild;\n        }\n    },\n    // internal method to load the provided item in this class items property\n    _loadItems: function (items, appendItems) {\n        if (!appendItems && this.items.length) {\n            this.items = [];\n        }\n\n        if (items && items instanceof Array && items.length) {\n            for (var i = 0; i < items.length; i++) {\n                this.items.push(items[i]);\n            }\n        }\n    },\n    // this method will be called when the slide has no items\n    _hideSlider: function () {\n        this.selector.style.display = \"none\";\n    },\n    // this method will be called to show the slider if it's already hidden\n    _showSlider: function () {\n        this.selector.style.display = \"block\";\n    },\n    // initialize the slider\n    _applySlider: function (speed) {\n        var me = this;\n        me.$slider = $(me.selector);\n        if (me.items.length > 1) {\n\n            var sliderOptions = {\n                navigation: false,\n                dots: false,\n                slideSpeed: 800,\n                paginationSpeed: 800,\n                singleItem: true,\n                pagination: false,\n                items: 1,\n                itemsMobile: true,\n\t\t\t\tlazyLoad:true,\n                autoHeight: false,\n                autoplay: true,\n                autoplaySpeed:800\n            };\n\n            sliderOptions.autoplay =(speed==0)? 0:3000;\n            sliderOptions.autoplayTimeout =speed? speed:5000;\n            sliderOptions.loop = true;\n            me.$slider.owlCarousel(sliderOptions);\n        }\n\n\n        if(typeof speed === 'undefined')\n            $('.plugin-slide').show();\n        else\n            $('.my-slide').show();\n    },\n    // destroy the slider if it's already in the DOM\n    _destroySlider: function () {\n        if(!this.$slider || !this.$slider.data) return;\n        var sliderData = this.$slider.data('owlCarousel');\n        if (sliderData) {\n            this.$slider.trigger('autoplay.stop.owl');\n            this.$slider.trigger('autoplay.loop.owl', false);\n            sliderData.destroy();\n        }\n    },\n    // render the slider wrapper HTML\n    _renderSlider: function () {\n        var me = this;\n\n\t\t// Add min-height to carousel to prevent it from pushing content down.\n\t\tme.selector.style['min-height'] = me._minHeight;\n        me.selector.style.position = \"relative\";\n        me.selector.style.top = \"0px\";\n        me.selector.style.left = \"0px\";\n\t\t\n        //me.selector.style.width = this.cssWidth;\n        //me.selector.style.height = this.cssHeight;\n        me.selector.className = \"plugin-slider text-center\";\n    },\n    // loop and append the images to the DOM\n    _loadImages: function (speed, callback) {\n        var items = this.items;\n        var itemsLength = items.length;\n\n        var pending =  itemsLength;\n\n        if(itemsLength == 0){\n            callback();\n        }\n\n        for (var i = 0; i < itemsLength; i++) {\n            this._appendItem(items[i], i,speed, function(){\n                pending--;\n\n                if(pending == 0){\n                    callback();\n                }\n            });\n        }\n    },\n    // add new slider to the DOM\n    _appendItem: function (item, index, speed, callback) {\n        var slider = document.createElement(\"div\");\n\n        if(typeof speed === 'undefined')\n            slider.className = \"plugin-slide\";\n        else\n            slider.className = \"my-slide\";\n\t\t\n\t\tif(0 != index) {\n\t\t\tslider.style.display = \"none\";\n\t\t}\n\t\t\n        slider.addEventListener(\"click\", function () {\n            buildfire.actionItems.execute(item, function (err, result) {\n                if (err) {\n                    console.warn('Error openning slider action: ', err);\n                }\n            });\n        });\n\n        // Images\n        var me = this;\n        var image = document.createElement(\"img\");\n        me.$slider = $(me.selector);\n\n        buildfire.imageLib.local.cropImage(item.iconUrl, {\n            width: this.width,\n            height: this.height\n        }, function (err, result) {\n            if (!err) {\n                image.src = result;\n                image.style.transform = \"translateZ(0)\";\n                slider.appendChild(image);\n                me.selector.appendChild(slider);\n            }\n            else\n                console.log('Error occurred while cropping image: ', err);\n\n            callback();\n        });\n    }\n};","'use strict';\n\nif (typeof (buildfire) == \"undefined\") throw (\"please add buildfire.js first to use pluginInstances sortableList components\");\n\nif (typeof (buildfire.notifications) == \"undefined\") throw (\"please add notifications.js first to use pluginInstances sortableList components\");\n\nif (typeof (buildfire.components) == \"undefined\")\n    buildfire.components = {};\n\nif (typeof (buildfire.components.pluginInstance) == \"undefined\")\n    buildfire.components.pluginInstance = {};\n\n/*\n options: { //optional will also ecep a number for page index\n    pageIndex: 0 ,\n    pageSize: 20\n }\n*/\nbuildfire.components.pluginInstance.getAllPlugins = function (options, callback) {\n  //  var me = this;\n    if (typeof (options) == \"function\") {\n        callback = options;\n        options = {\n            pageIndex: 0 ,\n            pageSize: 50\n        };\n    }\n    else if(typeof(options) == \"number\"){\n        options = {\n            pageIndex: options ,\n            pageSize: 50\n        };\n    }\n\n    if (!callback) {\n        throw \"Please provide a callback forget AllPlugins\";\n    }\n    buildfire.pluginInstance.search(options, function (err, result) {\n        if (err) {\n            console.error(\"Error searching plugins: \", err);\n        }\n        var data = buildfire.components.pluginInstance._mapFromSearch(result);\n        console.log(result)\n        callback(err, { total: result.totalRecord, data: data });\n    });\n},\n\nbuildfire.components.pluginInstance._mapFromSearch = function (data) {\n    var result = [], dataResult = [], dataResultLength = 0, currentPlugin = null, tempObj = null;\n    if (data.result && data.result instanceof Array) {\n        dataResult = data.result;\n        dataResultLength = dataResult.length;\n        for (var i = 0; i < dataResultLength; i++) {\n\n            currentPlugin = dataResult[i];\n            if (currentPlugin.data && currentPlugin.data._buildfire) {\n                tempObj = {};\n\n                tempObj.folderName = currentPlugin.data._buildfire.pluginType.result[0].folderName;\n                tempObj.instanceId = currentPlugin.data.instanceId;\n                tempObj.iconUrl = currentPlugin.data.iconUrl;\n                tempObj.pluginTypeId = currentPlugin.data._buildfire.pluginType.data;\n                tempObj.pluginTypeName = currentPlugin.data._buildfire.pluginType.result[0].name;\n                tempObj.title = currentPlugin.data.title;\n                tempObj.iconClassName = currentPlugin.data.iconClassName;\n                result.push(tempObj);\n                tempObj = null;\n                currentPlugin = null;\n            }\n        }\n    }\n    return result;\n};\n\n// This is the class that will be used in the plugin content, design, or settings sections\nbuildfire.components.pluginInstance.sortableList = function (selector, items, dialogOptions, loadAllItems, hideLoadButton) {\n    // sortableList requires Sortable.js\n    if (typeof (Sortable) == \"undefined\") throw (\"please add Sortable first to use sortableList components\");\n    this.selector = selector;\n    this.items = [];\n    this.loadedInstances = [];\n    this.checkId = \"loadAllPlugins\" + Math.floor((Math.random() * 1000) + 1);\n    this.loadAllSelector = \"#\" + this.checkId;\n    this.hideLoadButton = hideLoadButton;\n    this._loadAllItems = loadAllItems ? true : false;\n    this.dialogOptions = typeof (dialogOptions) == \"object\" && dialogOptions != null ? dialogOptions : { showIcon: true, confirmDeleteItem: true };\n    this.init(selector);\n    this.loadItems(items);\n};\n\n// sortableList editor methods\nbuildfire.components.pluginInstance.sortableList.prototype = {\n    // will be called to initialize the setting in the constructor\n    init: function (selector) {\n        this.selector = this._getDomSelector(selector);\n        this._renderTemplate();\n        this.itemsContainer = this.selector.querySelector(\".draggable-list-view\");\n        this._initEvents();\n    },\n    /* This will be triggered when the order of items changes\n       Example: if you move the first item location to be the second this will return item object, 0, 1 */\n    onOrderChange: function (item, oldIndex, newIndex) {\n        console.warn(\"please handle onOrderChange\", item, oldIndex, newIndex);\n    },\n    // This will be triggered when you add a new item, item index will be items.length\n    onAddItems: function (items) {\n        console.warn(\"please handle onAddItems\", items);\n    },\n    // This will be triggered when you delete an item\n    onDeleteItem: function (item, index) {\n        console.warn(\"please handle onDeleteItem\", item);\n    },\n    // This will be triggered when the user checks to load all plugins option\n    onLoadAll: function (items) {\n        console.warn(\"please handle onLoadAll\", items);\n    },\n    // This will be triggered when you delete an item\n    onUnloadAll: function () {\n        console.warn(\"please handle onUnloadAll\");\n    },\n    loadAllItems: function () {\n        this._loadAllItems = true;\n        this.selector.querySelector(this.loadAllSelector).setAttribute(\"checked\", true);\n        this._toggleAddButton(\"disable\");\n    },\n    // this method allows you to replace the slider image or append to then if appendItems = true\n    loadItems: function (items, appendItems, showPlugin) {\n        if (items && items instanceof Array) {\n            if (!appendItems && this.items.length !== 0) {\n                // here we want to remove any existing items since the user of the component don't want to append items\n                this._removeAll();\n            }\n            if(appendItems=='loadAll' || showPlugin=='loadAll'){\n                this._loadAllItems = true;\n                this.selector.querySelector(this.loadAllSelector).setAttribute(\"checked\", true);\n                this._toggleAddButton(\"disable\");\n            }\n\n            for (var i = 0; i < items.length; i++) {\n                this.items.push(items[i]);\n                this.loadedInstances.push(items[i].instanceId);\n                this._appendItem(items[i]);\n            }\n        }\n    },\n    // allows you to append a single item or an array of items\n    append: function (items) {\n        if (!items)\n            return;\n        else if (!(items instanceof Array) && typeof (items) == \"object\")\n            items = [items];\n\n        this.loadItems(items, true);\n    },\n    // remove all items in list\n    clear: function () {\n        this._removeAll();\n        this.onDeleteItem();\n    },\n    // remove all the DOM element and empty the items array\n    _removeAll: function () {\n        this.items = [];\n        this.loadedInstances = [];\n        var fc = this.itemsContainer.firstChild;\n\n        while (fc) {\n            this.itemsContainer.removeChild(fc);\n            fc = this.itemsContainer.firstChild;\n        }\n    },\n    // append new sortable item to the DOM\n    _appendItem: function (item) {\n        var me = this,\n            // Create the required DOM elements\n            wrapper = document.createElement(\"div\"),\n            moveHandle = document.createElement(\"span\"),\n            mediaHolder = null,\n            media = null,\n            details = document.createElement(\"div\"),\n            title = document.createElement(\"span\"),\n            buttonsWrapper = document.createElement(\"div\"),\n            navigateButton = document.createElement(\"span\"),\n            deleteButton = document.createElement(\"span\");\n\n        // Add the required classes to the elements\n        wrapper.className = \"d-item clearfix\";\n        moveHandle.className = \"icon icon-menu cursor-grab pull-left\";\n        details.className = \"copy pull-right\";\n        title.className = \"title ellipsis item-title\";\n        buttonsWrapper.className = \"pull-right\";\n        navigateButton.className = \"btn-icon btn-link-icon btn-primary\";\n        deleteButton.className = \"btn-icon btn-delete-icon btn-danger transition-third\";\n\n        title.innerHTML = item.title;\n\n        // Append elements to the DOM\n        wrapper.appendChild(moveHandle);\n\n        if (this.dialogOptions.showIcon == true) {\n            mediaHolder = document.createElement(\"div\");\n            mediaHolder.className = \"media-holder pull-left\";\n            if (item.iconUrl) {\n                media = document.createElement(\"img\");\n                media.src = this._resizeImage(item.iconUrl, { width: 80, height: 40 });\n                mediaHolder.appendChild(media);\n            } else if (item.iconClassName) {\n                media = document.createElement(\"i\");\n                media.className = \"main-icon \" + item.iconClassName;\n                mediaHolder.appendChild(media);\n            }\n\n            wrapper.appendChild(mediaHolder);\n        }\n\n        details.appendChild(title);\n        buttonsWrapper.appendChild(navigateButton);\n        buttonsWrapper.appendChild(deleteButton);\n\n        details.appendChild(buttonsWrapper);\n        wrapper.appendChild(details);\n        me.itemsContainer.appendChild(wrapper);\n\n        // initialize the required events on the current item\n        (function () {\n            navigateButton.addEventListener(\"click\", function (e) {\n                e.preventDefault();\n                buildfire.navigation.navigateTo({pluginId : item.pluginTypeId ,  instanceId :  item.instanceId  , folderName : item.folderName , title : item.title });\n            });\n\n            deleteButton.addEventListener(\"click\", function (e) {\n                e.preventDefault();\n\t\tvar deleteItem = function() {\n\t\t\tvar itemIndex = me._getItemIndex(item);\n\t\t\tvar itemId = me.items[itemIndex].instanceId;\n\t\t\tvar\tparent = deleteButton.parentNode.parentNode.parentNode;\n\t\t\tif (itemIndex != -1) {\n\t\t\t\tme.items.splice(itemIndex, 1);\n\t\t\t\tme.loadedInstances.splice(me.loadedInstances.indexOf(itemId), 1);\n\t\t\t\tparent.parentNode.removeChild(parent);\n\t\t\t\tme.onDeleteItem(item, itemIndex);\n\t\t\t}\n\t\t};\n\t\tif(me.dialogOptions.confirmDeleteItem) {\n\t\t\tbuildfire.notifications.confirm({\n\t\t\t\ttitle: \"Remove Plugin Instance\",\n\t\t\t\tmessage: '<p>Are you sure you want to do this?</p>\\\n\t\t\t<p class=\"margin-zero\">Note: If you would like to add it again, you can do so by clicking the button above.</p>',\n\t\t\t\tbuttonLabels: [\"Delete\", \"Cancel\"],\n\t\t\t\ttarget: e.currentTarget\n\t\t\t}, function (e) {\n\t\t\t\tdeleteItem();\n\t\t\t}.bind(this));\n\t\t} else {\n\t\t\tdeleteItem();\n\t\t}\n            });\n        })(item);\n    },\n\n    _getOffset: function (el) {\n        el = el.getBoundingClientRect();\n        return {\n            left: el.left + window.scrollX,\n            top: el.top + window.scrollY\n        }\n    },\n    // render the basic template HTML\n    _renderTemplate: function () {\n        var componentContainer = document.createElement(\"div\");\n        var componentName = document.createElement(\"div\");\n        var contentContainer = document.createElement(\"div\");\n        var buttonContainer = document.createElement(\"div\");\n        var getAllContainer = document.createElement(\"div\");\n        var getAllCheckbox = document.createElement(\"input\");\n        var getAlllabel = document.createElement(\"label\");\n        var button = document.createElement(\"button\");\n        var sliderContainer = document.createElement(\"div\");\n\n        getAllCheckbox.setAttribute(\"type\", \"checkbox\");\n        if (this._loadAllItems) {\n            getAllCheckbox.setAttribute(\"checked\", \"checked\");\n        } else {\n            getAllCheckbox.removeAttribute(\"checked\");\n        }\n\n        componentContainer.className = \"item clearfix row margin-bottom-fifteen\";\n        componentName.className = \"labels col-md-3 padding-right-zero pull-left\";\n        componentName.innerHTML = \"Plugin Instances\";\n        contentContainer.className = \"main col-md-9 pull-right\";\n        buttonContainer.className = \"clearfix\";\n        getAllContainer.className = \"checkbox checkbox-primary\";\n        button.className = \"btn btn-success pull-left add-new-item\";\n        sliderContainer.className = \"carousel-items hide-empty draggable-list-view margin-top-twenty border-radius-four border-grey\";\n\n        button.innerHTML = \"Add Plugin Instance\";\n        getAlllabel.innerHTML = \"Load all plugin instances\";\n        getAlllabel.setAttribute(\"for\", this.checkId);\n        getAllCheckbox.id = this.checkId;\n\n        getAllContainer.appendChild(getAllCheckbox);\n        getAllContainer.appendChild(getAlllabel);\n        componentContainer.appendChild(componentName);\n        buttonContainer.appendChild(button);\n        contentContainer.appendChild(buttonContainer);\n        contentContainer.appendChild(getAllContainer);\n        contentContainer.appendChild(sliderContainer);\n        componentContainer.appendChild(contentContainer);\n        if (this.hideLoadButton) {\n            getAllContainer.style.display = \"none\";\n        }\n        this.selector.appendChild(componentContainer);\n    },\n    // initialize the generic events\n    _initEvents: function () {\n        var me = this;\n        var oldIndex = 0;\n        // initialize add new item button\n        me.selector.querySelector(\".add-new-item\").addEventListener(\"click\", function () {\n            me._openPluginInstance({}, function (plugins) {\n                var newInstances = 0, pluginsLength, addedItems = [];\n                if (plugins instanceof Array) {\n                    pluginsLength = plugins.length;\n                    for (var i = 0; i < pluginsLength; i++) {\n                        if (me.loadedInstances.indexOf(plugins[i].instanceId) == -1) {\n                            me.items.push(plugins[i]);\n                            addedItems.push(plugins[i]);\n                            me._appendItem(plugins[i]);\n                            me.loadedInstances.push(plugins[i].instanceId);\n                            newInstances++;\n                        }\n                    }\n\n                    if (newInstances > 0) {\n                        me.onAddItems(addedItems);\n                    }\n                }\n            });\n        });\n\n        me.selector.querySelector(this.loadAllSelector).addEventListener(\"change\", function () {\n            if (this.checked) {\n                me._toggleAddButton(\"disable\");\n\n                // remove all selected plugins from this.items and from the DOM\n                // me._removeAll(); //Commented this method to Implement the feature of pivital ticket #113777595\n\n                me.onLoadAll();\n\n            } else {\n                me.onUnloadAll();\n                me._toggleAddButton(\"enable\");\n            }\n        });\n\n        // initialize the sort on the container of the items\n        me.sortableList = Sortable.create(me.itemsContainer, {\n            animation: 150,\n            onUpdate: function (evt) {\n                var newIndex = me._getSortableItemIndex(evt.item);\n                var tmp = me.items[oldIndex];\n\n                if (oldIndex < newIndex) {\n                    for (var i = oldIndex + 1; i <= newIndex; i++) {\n                        me.items[i - 1] = me.items[i];\n                    }\n                } else {\n                    for (var i = oldIndex - 1; i >= newIndex; i--) {\n                        me.items[i + 1] = me.items[i];\n                    }\n                }\n\n                me.items[newIndex] = tmp;\n                me.onOrderChange(tmp, oldIndex, newIndex);\n            },\n            onStart: function (evt) {\n                oldIndex = me._getSortableItemIndex(evt.item);\n            }\n        });\n    },\n    // a wrapper method over buildfire showDialog\n    _openPluginInstance: function (options, callback) {\n        buildfire.pluginInstance.showDialog(options, function (err, plugin) {\n            if (err)\n                console.error(\"Error getting item details: \", err);\n            else {\n                if (plugin) {\n                    callback(plugin);\n                }\n            }\n        });\n    },\n    // get item index in the items array\n    _getItemIndex: function (item) {\n        return this.items.indexOf(item);\n    },\n    // get item index from the DOM sortable elements\n    _getSortableItemIndex: function (item) {\n        var index = 0;\n        while ((item = item.previousSibling) != null) {\n            index++;\n        }\n        return index;\n    },\n    _getDomSelector: function (selector) {\n        if (selector && selector.nodeType && selector.nodeType === 1) {\n            return selector;\n        } else if (typeof (selector) === \"string\") {\n            selector = document.querySelector(selector);\n            if (selector) {\n                return selector;\n            }\n            throw \"selector is not a valid DOM selector\";\n        }\n        throw \"selector is not a valid DOM element nor string selector\";\n    },\n    _resizeImage: function (url, options) {\n        if (!url) {\n            return \"\";\n        }\n        else {\n            return buildfire.imageLib.resizeImage(url, options);\n        }\n    },\n    _toggleAddButton: function (status) {\n        var buttonSelector = this.selector.querySelector(\".add-new-item\");\n        if (status == \"enable\") {\n            buttonSelector.removeAttribute(\"disabled\");\n        } else {\n            buttonSelector.setAttribute(\"disabled\", \"disabled\");\n        }\n    }\n};"],"sourceRoot":"/source/"}